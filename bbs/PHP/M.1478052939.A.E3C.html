<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Re: [請益] PHP抓json後使用foreach問題 - 看板 PHP - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="{&#34;key&#34;:&#34;value&#34;}
(像我用的swift語言則是[&#34;key&#34;:&#34;value&#34;]，是不是長得比較像陣列了？)
稍微來談談這個好了。
在php叫做hash table
在javascript叫做object
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="Re: [請益] PHP抓json後使用foreach問題">
<meta property="og:description" content="{&#34;key&#34;:&#34;value&#34;}
(像我用的swift語言則是[&#34;key&#34;:&#34;value&#34;]，是不是長得比較像陣列了？)
稍微來談談這個好了。
在php叫做hash table
在javascript叫做object
">
<link rel="canonical" href="https://www.ptt.cc/bbs/PHP/M.1478052939.A.E3C.html">

<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-common.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-custom.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-print.css" media="print">




	<script async src='/cdn-cgi/challenge-platform/h/g/scripts/cb/invisible.js?cb=710cea0659f914d0'></script></head>
    <body>
		
<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" href="/bbs/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" href="/bbs/PHP/index.html"><span class="board-label">看板 </span>PHP</a>
		<a class="right small" href="/about.html">關於我們</a>
		<a class="right small" href="/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" href="/bbs/PHP/index.html">返回看板</a>
		<div class="bar"></div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">tkdmaf (皮皮快跑)</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">PHP</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">Re: [請益] PHP抓json後使用foreach問題</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Wed Nov  2 10:15:35 2016</span></div>
<span class="f2">※ 引述《yongb (火系見習魔法師 )》之銘言：
</span><span class="f6">: 最近用PHP玩json的時候發現
</span><span class="f6">: 要使用foreach的時候居然無法迴圈列出
</span><span class="f6">: 以下是code
</span><span class="f6">: &lt;?php
</span><span class="f6">: 1    $json=&#39;
</span><span class="f6">: 2   {
</span><span class="f6">: 3           &#34;test&#34;:[
</span><span class="f6">: 4                   {
</span><span class="f6">: 5                    &#34;pid&#34;:34,
</span><span class="f6">: 6                    &#34;name&#34;:cat
</span><span class="f6">: 7                   },
</span><span class="f6">: 8                   {
</span><span class="f6">: 9                    &#34;pid&#34;:35,
</span><span class="f6">: 10                    &#34;name&#34;:dog
</span><span class="f6">: 11                  }
</span><span class="f6">: 12                 ]
</span><span class="f6">: 13  }&#39;;
</span><span class="f6">: 14
</span><span class="f6">: 15  $testjson=json_decode($json);
</span><span class="f6">: 16  echo $testjson-&gt;test[0]-&gt;pid.&#34;&lt;br/&gt;&#34;;
</span><span class="f6">: 17  foreach($testjson as $key =&gt;$value){
</span><span class="f6">: 18      $value[0]-&gt;pid;
</span><span class="f6">: 19         }
</span><span class="f6">: ?&gt;
</span><span class="f6">: 一開始15行傳到testjson是物件
</span><span class="f6">: 可是當使用foreach後傳到$value的時候就變成一種奇怪的狀態
</span><span class="f6">: 用var_dump看了一下
</span><span class="f6">: 似乎是物件在陣列裏面？
</span><span class="f6">: 更讓我驚訝的是$key裏面居然是test冏
</span><span class="f6">: 然後pid只跑出一筆，可是不$value[0]又會錯誤，被那個test卡著
</span><span class="f6">: 我查了一下有兩個解決方式
</span><span class="f6">: 1.改15行的json_decode($json,true)直接變成陣列
</span><span class="f6">: 可是我又很不想用陣列
</span><span class="f6">: 2.使用for迴圈但看起來好丑，也不太想用
</span><span class="f6">: 各位大大有別的思路嗎？ 小弟在此先謝過
</span>
{&#34;key&#34;:&#34;value&#34;}
(像我用的swift語言則是[&#34;key&#34;:&#34;value&#34;]，是不是長得比較像陣列了？)

稍微來談談這個好了。
在php叫做hash table
在javascript叫做object
在python、object-c、swift之類的叫做dictionary

(對，在php的書很多都告訴你這叫array，事實上卻是和array混在一起使用了。
在其他的語言array和dictionary在定義型態時可是分開來的。)

因為php在「定義」上，只有object和array兩種東西。
事實上key/value如果是要定義在dictionary的話，是比較接近陣列而不是物件。
因為物件的話本身還會有「方法」和「屬性」這二件事。
而事實上在json格式中如果定義方法那是不對的。
定義了方法就不是json而是物件。
但是一個不能定義方法的東西，就不應該使用物件的方式來處理。
這完全就不是你想不想用……而是你必須那樣使用。
(以及…事實上在php中處理array的速度比處理object還快一些)

既然那是最佳的解決問題途逕，就不要用個人的喜好來硬要用別的方式解。
否則只是累死自己而已。

--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc), 來自: 123.204.164.110
</span><span class="f2">※ 文章網址: <a href="https://www.ptt.cc/bbs/PHP/M.1478052939.A.E3C.html" target="_blank" rel="noreferrer noopener nofollow">https://www.ptt.cc/bbs/PHP/M.1478052939.A.E3C.html</a>
</span><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">yongb</span><span class="f3 push-content">: 感謝大大聽你這樣一說，尤其這句定義了方法就不是json</span><span class="push-ipdatetime"> 11/02 17:36
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">yongb</span><span class="f3 push-content">: 而是物件，突然不知道我前面再堅持甚麼，既然這是最佳的問</span><span class="push-ipdatetime"> 11/02 17:37
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">yongb</span><span class="f3 push-content">: 提解決辦法</span><span class="push-ipdatetime"> 11/02 17:37
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">rickysu</span><span class="f3 push-content">: 這邊小小勘誤一下，在PHP這個叫作Associative Array</span><span class="push-ipdatetime"> 11/03 09:21
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">rickysu</span><span class="f3 push-content">: 另外一個以數字作為key的稱為Index Array</span><span class="push-ipdatetime"> 11/03 09:21
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">rickysu</span><span class="f3 push-content">: 在底層Object跟Array的儲存都是用Hashtable效能上</span><span class="push-ipdatetime"> 11/03 09:26
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">rickysu</span><span class="f3 push-content">: 是等價的，也因為如此才有辦法對 Object 作 foreach</span><span class="push-ipdatetime"> 11/03 09:27
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">yongb</span><span class="f3 push-content">: 我得先理解hashtable...</span><span class="push-ipdatetime"> 11/03 22:49
</span></div></div>
    
    <div id="article-polling" data-pollurl="/poll/PHP/M.1478052939.A.E3C.html?cacheKey=2148-469784680&amp;offset=2900&amp;offset-sig=bcd703534e62305a9528e934cf169fc720c37452" data-longpollurl="/v1/longpoll?id=a23907c352cd770b5b1a0e7480e985ecddf86d2b" data-offset="2900"></div>
    

    
</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//images.ptt.cc/bbs/v2.27/bbs.js"></script>

    <script type="text/javascript">(function(){window['__CF$cv$params']={r:'710cea0659f914d0',m:'7xYBNc5HUGHq1SEX.0wW5GjoFO5XXiC7lFBGTnEQ6qY-1653467480-0-AVb5TlLV4p4yc7beH2ZpAjcuD0h+7TJkQP8vcja3u8jtGK7pIWhHWRhng9Z/Y5HEmnDC8FcVh0Wib+8a+pInXC9rrU3CKUlPGdIeZGF/sla7F5kGgaABQdLuRvaAPchv4UczF9/8OO6YjY5WFJbNF67eJcjbJ9Y2JuCFRbiZ57ET',s:[0xa0cccf8dc6,0x57d6fc4dcf],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
