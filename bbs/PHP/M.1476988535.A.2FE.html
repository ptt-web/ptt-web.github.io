<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>[閒聊] froeach pass by reference - 看板 PHP - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="    今天在寫 foreach 的時候想偷懶用 pass by reference 閃掉指定 index 改值
    這件事，就是：
    foreach ($array as $k =&gt; $v)
      $array[$k][&#39;attr&#39;] = &#39;ok&#39;;
    改成
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="[閒聊] froeach pass by reference">
<meta property="og:description" content="    今天在寫 foreach 的時候想偷懶用 pass by reference 閃掉指定 index 改值
    這件事，就是：
    foreach ($array as $k =&gt; $v)
      $array[$k][&#39;attr&#39;] = &#39;ok&#39;;
    改成
">
<link rel="canonical" href="https://www.ptt.cc/bbs/PHP/M.1476988535.A.2FE.html">

<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-common.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-custom.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-print.css" media="print">




	<script async src='/cdn-cgi/challenge-platform/h/g/scripts/invisible.js?ts=1653465600'></script></head>
    <body>
		
<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" href="/bbs/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" href="/bbs/PHP/index.html"><span class="board-label">看板 </span>PHP</a>
		<a class="right small" href="/about.html">關於我們</a>
		<a class="right small" href="/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" href="/bbs/PHP/index.html">返回看板</a>
		<div class="bar"></div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">gpmm (銀色)</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">PHP</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">[閒聊] froeach pass by reference</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Fri Oct 21 02:35:33 2016</span></div>




    今天在寫 foreach 的時候想偷懶用 pass by reference 閃掉指定 index 改值
    這件事，就是：

    foreach ($array as $k =&gt; $v)
      $array[$k][&#39;attr&#39;] = &#39;ok&#39;;

    改成

    foreach ($array as &amp;$v)
      $v[&#39;attr&#39;] = &#39;ok&#39;;


    可是因為很少這樣寫，想說上網翻一下有沒有人踩到什麼奇怪的雷，
    結果就翻到這一篇 <a href="https://goo.gl/bD3ucj" target="_blank" rel="noreferrer noopener nofollow">https://goo.gl/bD3ucj</a>

    懶得開連結可以直接看以下的 code：

    $a = [&#39;zero&#39;, &#39;one&#39;, &#39;two&#39;, &#39;three&#39;];

    foreach ($a as &amp;$v) {
    }

    foreach ($a as $v) {
      echo $v.PHP_EOL;
    }

    輸出結果會是：

    zero
    one
    two
    two

    花了點時間才想通，有點意思 XD
    如果要正常化，記得 pass by reference 結束後要 unset ($v) 就可以了


--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc), 來自: 36.225.82.150
</span><span class="f2">※ 文章網址: <a href="https://www.ptt.cc/bbs/PHP/M.1476988535.A.2FE.html" target="_blank" rel="noreferrer noopener nofollow">https://www.ptt.cc/bbs/PHP/M.1476988535.A.2FE.html</a>
</span><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">magus</span><span class="f3 push-content">: 哈哈,值被倒數第二個改了,因為他還在ref第二個XD</span><span class="push-ipdatetime"> 10/21 08:35
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">knives</span><span class="f3 push-content">: 最後一個是不是寫錯了阿</span><span class="push-ipdatetime"> 10/21 09:06
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">knives</span><span class="f3 push-content">: 沒事，我看花了</span><span class="push-ipdatetime"> 10/21 09:10
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">Kenqr</span><span class="f3 push-content">: <a href="https://php.net/manual/en/control-structures.foreach.php" target="_blank" rel="noreferrer noopener nofollow">http://php.net/manual/en/control-structures.foreach.php</a></span><span class="push-ipdatetime"> 10/21 10:41
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">Kenqr</span><span class="f3 push-content">: 其實官方的document就有提了</span><span class="push-ipdatetime"> 10/21 10:41
</span></div></div>
    
    <div id="article-polling" data-pollurl="/poll/PHP/M.1476988535.A.2FE.html?cacheKey=2148-469801751&amp;offset=1398&amp;offset-sig=b735ea01cf0f550155087fbac43f300a893fe002" data-longpollurl="/v1/longpoll?id=b8f9455dbb24b511dfef64b8f43d20d19dd02eca" data-offset="1398"></div>
    

    
</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//images.ptt.cc/bbs/v2.27/bbs.js"></script>

    <script type="text/javascript">(function(){window['__CF$cv$params']={r:'710cea038c138aa4',m:'9IKueL4hn8YwndfJTLVudLIpjvY5jO6Bdce30QdsOkM-1653467479-0-AW7KHRj0YGIIOisov0BqazYMVlwizgjgui5W+n7RBWnYWhKQhGXeHvq/hWZZXMfsI5mJFabJNJKD6dZ5737sGHXcMYyoM8XX1YMQSE/b3vfbU6Sxl4s8B1q8tpwmbD0BHI/98XCMVx8wej8xEGivF1tjMgnUy4Y+R0//lxNukimx',s:[0x1df4a2d708,0xd68f3ad52e],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
