<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>[請益] 擷取網頁內容時，想把不要的內容排除 - 看板 PHP - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="    我現在要做一個事情，是分析歌詞裡常出現的詞句。
當然首先就要先收集大量的歌詞，我就去常見的歌詞網來
找，他們的歌詞都有寫在網頁的meta裡，像這樣
&lt;meta name=&#34;description&#34; content=&#34;八卦 黃安作曲 八卦八卦我牽掛&#34; /&gt;
所以很容易用 get_meta_tags就可以截取出來，我擷取出
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="[請益] 擷取網頁內容時，想把不要的內容排除">
<meta property="og:description" content="    我現在要做一個事情，是分析歌詞裡常出現的詞句。
當然首先就要先收集大量的歌詞，我就去常見的歌詞網來
找，他們的歌詞都有寫在網頁的meta裡，像這樣
&lt;meta name=&#34;description&#34; content=&#34;八卦 黃安作曲 八卦八卦我牽掛&#34; /&gt;
所以很容易用 get_meta_tags就可以截取出來，我擷取出
">
<link rel="canonical" href="https://www.ptt.cc/bbs/PHP/M.1445244735.A.3C0.html">

<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-common.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-custom.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-print.css" media="print">




	<script async src='/cdn-cgi/challenge-platform/h/g/scripts/invisible.js?ts=1653465600'></script></head>
    <body>
		
<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" href="/bbs/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" href="/bbs/PHP/index.html"><span class="board-label">看板 </span>PHP</a>
		<a class="right small" href="/about.html">關於我們</a>
		<a class="right small" href="/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" href="/bbs/PHP/index.html">返回看板</a>
		<div class="bar"></div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">poeta (鍵盤詩人)</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">PHP</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">[請益] 擷取網頁內容時，想把不要的內容排除</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Mon Oct 19 16:52:13 2015</span></div>
    我現在要做一個事情，是分析歌詞裡常出現的詞句。
當然首先就要先收集大量的歌詞，我就去常見的歌詞網來
找，他們的歌詞都有寫在網頁的meta裡，像這樣

&lt;meta name=&#34;description&#34; content=&#34;八卦 黃安作曲 八卦八卦我牽掛&#34; /&gt;

所以很容易用 get_meta_tags就可以截取出來，我擷取出
來以後，先把每一句歌詞後面的空白變成&lt;br&gt;，然後每遇
到一個&lt;br&gt;，就把它放入陣列裡面。這樣echo陣列，就會
印出每一句歌詞。

    但是印出陣列時，我發現除了歌詞之外，還會擷取到
詞曲作者的資訊，這不是我需要的，大概會變成這樣：

作詞：黃安&lt;br&gt;
演場：白安&lt;br&gt;
/&lt;br&gt;
李慶安&lt;br&gt;
導演：李安&lt;br&gt;

八卦八卦我牽掛&lt;br&gt;
找不到你爸爸&lt;br&gt;
找不到你媽媽&lt;br&gt;
找不到你全家&lt;br&gt;

我目前遇到的兩個問題是，有兩個演唱人時，原本他是用
/ 和空白區隔，都被我的&lt;br&gt;處理到了。另一個問題就是
上面提到的，作曲人資訊我完全不需要，有什麼辦法可以
把那些資訊剃除掉呢？

    目前想到的方法是，把導演、作詞、作曲等等所有的
資訊都收集起來，做一個判斷式，遇到了就不輸出。可是
這就面臨前一段指出的，雙演唱人誤判的問題。而不先處
理空白變成&lt;br&gt;，把歌詞分段輸入陣列，就不能做判斷，
所以就卡關了。

--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc), 來自: 36.232.160.76
</span><span class="f2">※ 文章網址: <a href="https://www.ptt.cc/bbs/PHP/M.1445244735.A.3C0.html" target="_blank" rel="noreferrer noopener nofollow">https://www.ptt.cc/bbs/PHP/M.1445244735.A.3C0.html</a>
</span><span class="f2">※ 編輯: poeta (36.232.160.76), 10/19/2015 16:52:45
</span><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">rockmanalpha</span><span class="f3 push-content">: 直接擷取網頁中的會不會比較好 因為顯示在網頁的</span><span class="push-ipdatetime"> 10/19 17:06
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">rockmanalpha</span><span class="f3 push-content">: 都有換行</span><span class="push-ipdatetime"> 10/19 17:06
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">rockmanalpha</span><span class="f3 push-content">: 我意思是從&lt;body&gt;&lt;/body&gt;裡面擷取</span><span class="push-ipdatetime"> 10/19 17:08
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">rockmanalpha</span><span class="f3 push-content">: 而如果在meta裡面抓 用正則來處理比較好</span><span class="push-ipdatetime"> 10/19 17:10
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">kuoll</span><span class="f3 push-content">: substr截取前兩個字  如果==作詞or作曲or編曲  那一項就不</span><span class="push-ipdatetime"> 10/19 23:18
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">kuoll</span><span class="f3 push-content">: 要echo就好了  至於/的問題  你先把&#34; / &#34;取代成&#34;/&#34;  再把空</span><span class="push-ipdatetime"> 10/19 23:18
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">kuoll</span><span class="f3 push-content">: 格換成&lt;br&gt;會不會比較容易一點？</span><span class="push-ipdatetime"> 10/19 23:19
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">poeta</span><span class="f3 push-content">: 對對，一時沒想到，謝謝兩位。</span><span class="push-ipdatetime"> 10/20 02:56
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">Peruheru</span><span class="f3 push-content">: 作詞 作曲 編曲 原作 翻唱 客串</span><span class="push-ipdatetime"> 10/20 09:30
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">Peruheru</span><span class="f3 push-content">: 如果有歌詞真的是&#34;編曲&#34;開頭就掛了，建議用編曲：</span><span class="push-ipdatetime"> 10/20 09:31
</span></div></div>
    
    <div id="article-polling" data-pollurl="/poll/PHP/M.1445244735.A.3C0.html?cacheKey=2148-469802002&amp;offset=2320&amp;offset-sig=af49f8f9a111e567c16bc593dcdce42171fa8e00" data-longpollurl="/v1/longpoll?id=f94c18642387e02531f72ee130afd20c82a0e3c1" data-offset="2320"></div>
    

    
</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//images.ptt.cc/bbs/v2.27/bbs.js"></script>

    <script type="text/javascript">(function(){window['__CF$cv$params']={r:'710cea28ac5f1fae',m:'vQ7Y9wnQ2ZHR.CwRPMdfzWNghakO9TYV98CrQJUPWtg-1653467486-0-Ad9Cv3X/ds20N0nSYXHJlnWAQBumHzNQuK1uwD8gWfNlQo85vdv+W6ge68g/bFZjz3zlEKFDWBV/3u5+5sY134G+jB/MVfESXOblT8pjR2/F+NfbT5eSg056mIFMNB+kwRiDf4u7UnPHTR4RWwg3SuKz/y0ICDAc+Mq1JgdxVbvH',s:[0xe91763eda4,0x96876320fa],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
