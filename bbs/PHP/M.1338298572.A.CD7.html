<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>[請益] preg_replace的問題 - 看板 PHP - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="各位好
在很亂的字串中，想抓出我所需要的字串
http://regexr.com?313h6
嘗試上面網址的方式後，我寫了一個function
function page_replace_str($WikiStr1)
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="[請益] preg_replace的問題">
<meta property="og:description" content="各位好
在很亂的字串中，想抓出我所需要的字串
http://regexr.com?313h6
嘗試上面網址的方式後，我寫了一個function
function page_replace_str($WikiStr1)
">
<link rel="canonical" href="https://www.ptt.cc/bbs/PHP/M.1338298572.A.CD7.html">

<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-common.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-custom.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-print.css" media="print">




	<script async src='/cdn-cgi/challenge-platform/h/g/scripts/invisible.js?ts=1653465600'></script></head>
    <body>
		
<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" href="/bbs/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" href="/bbs/PHP/index.html"><span class="board-label">看板 </span>PHP</a>
		<a class="right small" href="/about.html">關於我們</a>
		<a class="right small" href="/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" href="/bbs/PHP/index.html">返回看板</a>
		<div class="bar"></div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">renmax (鍛翼)</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">PHP</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">[請益] preg_replace的問題</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Tue May 29 21:36:10 2012</span></div>
各位好


在很亂的字串中，想抓出我所需要的字串

<a href="http://regexr.com?313h6" target="_blank" rel="noreferrer noopener nofollow">http://regexr.com?313h6</a>

嘗試上面網址的方式後，我寫了一個function



function page_replace_str($WikiStr1)
  {

    $results = preg_replace(&#34;/(?&lt;=^|&gt;)[^&gt;(.*?)&lt;]+?(?=&lt;|$)/&#34; , &#34;&#34; , $WikiStr1);

    return $results;
  }


// $WikiStr1是要處理的字串



卻無法把字串用空白給取代掉

請問，是哪邊出了問題嗎？


先謝謝各位的解答了，謝謝



--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc)
</span>◆ From: 140.129.20.145
<div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">MOONRAKER</span><span class="f3 push-content">:php pcre的[^...]不能這樣用吧</span><span class="push-ipdatetime"> 05/29 22:50
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">gpmm</span><span class="f3 push-content">:你要不要把 input 和你期望的 output 列一下？ o_Oa&#34;</span><span class="push-ipdatetime"> 05/29 23:31
</span></div>
input的規則大約如下：


&#39;&#39;&#39;......&#39;&#39;&#39;............[[...]]......[[..]]......&lt;ref xxxxxx&gt;xxxxxxx&lt;/ref&gt;...
......[[File:xxxxxxxxxxx]].......。==

// 會有好幾個&lt;ref&gt;和[[File:]]


output是希望只要有............這些字串就好(包含逗點和句點等標點符號)

而&#39;&#39;&#39;和[[以及]]以及&lt;ref xxxxxx&gt;xxxxxxx&lt;/ref&gt;加上[[File:xxxxxxxxxxx]]

還有最後的==這些都是不需要的


因為要處理的字串太複雜，才想用replace的方式把不需要的字串用空白代替

不知道能不能用match的方式一次搞定就是了


麻煩了，謝謝



<div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:我對正規表示法很不熟......只好照著RegExr上弄</span><span class="push-ipdatetime"> 05/29 23:32
</span></div><span class="f2">※ 編輯: renmax          來自: 140.129.38.219       (05/29 23:38)
</span><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">MOONRAKER</span><span class="f3 push-content">:我有寫出跟你一樣效果的了 可是你真的是要刪掉html tag</span><span class="push-ipdatetime"> 05/29 23:38
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">MOONRAKER</span><span class="f3 push-content">:中間的東東嗎…</span><span class="push-ipdatetime"> 05/29 23:40
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:原文的問題的想法是想說一步一步把不需要的字串replace掉</span><span class="push-ipdatetime"> 05/29 23:42
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:不過g大問input &amp; output 就把實際想抓的字串打出來</span><span class="push-ipdatetime"> 05/29 23:44
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:所以 實際上想要的字串 就是「......」這些字 而不是xxxxxx</span><span class="push-ipdatetime"> 05/29 23:44
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:的確是不需要TAG中的字串 也就是上面說的XXX這些</span><span class="push-ipdatetime"> 05/29 23:46
</span></div><span class="f2">※ 編輯: renmax          來自: 140.129.38.219       (05/29 23:48)
</span><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">MOONRAKER</span><span class="f3 push-content">:把中間的[...]換成[^&lt;]。</span><span class="push-ipdatetime"> 05/30 02:43
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:正規化改成 /(?&lt;=^|&gt;)[^&lt;]+?(?=&lt;|$)/ 這樣嗎@@?</span><span class="push-ipdatetime"> 05/30 11:48
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:嘗試了一下 一樣抓不出來</span><span class="push-ipdatetime"> 05/30 11:49
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">MOONRAKER</span><span class="f3 push-content">:/(?&lt;=^|&gt;)[^&lt;]+(?=&lt;\/|$)/</span><span class="push-ipdatetime"> 05/30 12:04
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:還是不行耶&gt;&#34;&lt; 什麼字串也沒顯示出來......空白一片</span><span class="push-ipdatetime"> 05/30 12:17
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">gpmm</span><span class="f3 push-content">:還是看不懂 XDDD</span><span class="push-ipdatetime"> 05/30 12:36
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">gpmm</span><span class="f3 push-content">:我覺得你可以做一個「真實的」假資料 txt 檔，看是丟到</span><span class="push-ipdatetime"> 05/30 12:36
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">gpmm</span><span class="f3 push-content">:dropbox 或哪裡，板友直接拉下來測比較快，不然你的 input</span><span class="push-ipdatetime"> 05/30 12:37
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">gpmm</span><span class="f3 push-content">:重複性那邊我看的有點霧煞煞 o_O</span><span class="push-ipdatetime"> 05/30 12:37
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:<a href="http://140.129.20.145/library10.txt" target="_blank" rel="noreferrer noopener nofollow">http://140.129.20.145/library10.txt</a></span><span class="push-ipdatetime"> 05/30 12:50
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:<a href="http://140.129.20.145/library11.txt" target="_blank" rel="noreferrer noopener nofollow">http://140.129.20.145/library11.txt</a></span><span class="push-ipdatetime"> 05/30 12:50
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">renmax</span><span class="f3 push-content">:上面是其中兩個input檔</span><span class="push-ipdatetime"> 05/30 12:51
</span></div></div>
    
    <div id="article-polling" data-pollurl="/poll/PHP/M.1338298572.A.CD7.html?cacheKey=2148-469788060&amp;offset=3277&amp;offset-sig=a84df2de6f56734b25eda123fe971e508688b155" data-longpollurl="/v1/longpoll?id=2c6601133b1a04ffa448829c686bc6baba5b4d1d" data-offset="3277"></div>
    

    
</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//images.ptt.cc/bbs/v2.27/bbs.js"></script>

    <script type="text/javascript">(function(){window['__CF$cv$params']={r:'710cea4fcff08a56',m:'mG4W421V2gusezxuG4sh7hlzxSJaJQn87xxgel9g0K8-1653467491-0-AUl9WxiS2d+m/fdU/de9eMS0h8IMgTjb9DaTuhbzb4ywVMpHEY0TkHP6sHB5cFo5YrwD85Njk3xCAiA10Zl4U/Jz2ZAnnVwkFM8+5xFzGczPDdhkuCJd5pfy7Ni6Vf2tQZG1AvuDP+8pii0NUonAP1g63n/zOyW+12PXscL9PAnY',s:[0x44ac013e0e,0xfc9c7d1bdd],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
