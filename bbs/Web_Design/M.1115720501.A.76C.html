<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Re: [問題] 怎麼用 Smarty 做 &#34;分頁導覽列&#34;? - 看板 Web_Design - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="非常感謝兩位的回應...
不過最後我用了另一個方法, 其實大同小異, 也提供一下好了...
我寫了一個 Smarty 的 plugin (程式碼附在最後面), 用來產生分頁導覽列的字串,
函式名叫 html_pagebar, 在樣版裡的語法為:
&lt;{html_pagebar total=總頁數 limit=要顯示的連結數 current=目前頁碼}&gt;
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="Re: [問題] 怎麼用 Smarty 做 &#34;分頁導覽列&#34;?">
<meta property="og:description" content="非常感謝兩位的回應...
不過最後我用了另一個方法, 其實大同小異, 也提供一下好了...
我寫了一個 Smarty 的 plugin (程式碼附在最後面), 用來產生分頁導覽列的字串,
函式名叫 html_pagebar, 在樣版裡的語法為:
&lt;{html_pagebar total=總頁數 limit=要顯示的連結數 current=目前頁碼}&gt;
">
<link rel="canonical" href="https://www.ptt.cc/bbs/Web_Design/M.1115720501.A.76C.html">

<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-common.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-custom.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-print.css" media="print">




	<script async src='/cdn-cgi/challenge-platform/h/g/scripts/invisible.js?ts=1653465600'></script></head>
    <body>
		
<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" href="/bbs/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" href="/bbs/Web_Design/index.html"><span class="board-label">看板 </span>Web_Design</a>
		<a class="right small" href="/about.html">關於我們</a>
		<a class="right small" href="/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" href="/bbs/Web_Design/index.html">返回看板</a>
		<div class="bar"></div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">eliang ()</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">Web_Design</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">Re: [問題] 怎麼用 Smarty 做 &#34;分頁導覽列&#34;?</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Tue May 10 18:39:00 2005</span></div>
非常感謝兩位的回應...

不過最後我用了另一個方法, 其實大同小異, 也提供一下好了...

我寫了一個 Smarty 的 plugin (程式碼附在最後面), 用來產生分頁導覽列的字串,

函式名叫 html_pagebar, 在樣版裡的語法為:

&lt;{html_pagebar total=總頁數 limit=要顯示的連結數 current=目前頁碼}&gt;

例如:
&lt;{html_pagebar total=10 limit=5 current=6}&gt;

則輸出:
... &lt;a href=&#34;index.php?page=4&#34;&gt;4&lt;/a&gt; .
&lt;a href=&#34;index.php?page=5&#34;&gt;5&lt;/a&gt; .
&lt;span class=&#34;current&#34;&gt;6&lt;/span&gt; .        <span class="f0 hl">←目前頁碼會自動置於中央</span>
&lt;a href=&#34;index.php?page=7&#34;&gt;7&lt;/a&gt; .
&lt;a href=&#34;index.php?page=8&#34;&gt;8&lt;/a&gt; ...


以下是程式碼, 有需要請自己修改

Smarty/plugins/function.html_pagebar.php

&lt;?php

function smarty_function_html_pagebar($params, &amp;$smarty) {
    if (empty($params[&#39;total&#39;])) {
        $smarty-&gt;trigger_error(&#39;html_pagebar: missing &#34;total&#34; parameter&#39;);
        return;
    }
    $total = $params[&#39;total&#39;];   // 總頁數
    $limit = 15;                 // 要顯示的連結數
    $current = 0;                // 目前的頁碼
    if (!empty($params[&#39;limit&#39;])) {
        $limit = $params[&#39;limit&#39;];
    }
    if (!empty($params[&#39;current&#39;])) {
        $current = $params[&#39;current&#39;];
    }

    // 計算起始頁與最後頁
    if ($total &gt; $limit) {
        $start = max(1, $current-floor(($limit-1)/2));
        $end = $start + $limit - 1;
        if ($end &gt;= $total) {
            $end = $total;
            $start = $end - $limit + 1;
        }
    } else {
        $start = 1;
        $end = $total;
    }

    $result = &#39;&#39;;
    if ($start &gt; 1) {
        $result = &#39;... &#39;;   // 如果起始頁碼不為 1 時, 在最前端加上 &#39;...&#39;
    }
    for ($i=$start; $i &lt;= $end; $i++) {
        if ($i == $current)
            $result .= &#34;&lt;span class=\&#34;current\&#34;&gt;$i&lt;/span&gt;&#34;;
        else
            $result .= &#34;&lt;a href=\&#34;index.php?page=$i\&#34;&gt;$i&lt;/a&gt;&#34;;
        if ($i != $end)
            $result .= &#39; . &#39;;
    }
    if ($end &lt; $total) {
        $result .= &#39; ...&#39;;  // 如果最終頁碼不到總頁數, 在最後加上 &#39;...&#39;
    }
    return $result;
}

?&gt;


--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc)
</span>◆ From: 210.58.40.9
<span class="f2">※ 編輯: eliang          來自: 210.58.40.9          (05/10 18:40)
</span><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">arzbar</span><span class="f3 push-content">:真想不到還有那麼多人用 smarty...這篇好...推!</span><span class="push-ipdatetime"> 218.162.196.58 05/10
</span></div></div>
    
    <div id="article-polling" data-pollurl="/poll/Web_Design/M.1115720501.A.76C.html?cacheKey=2149-475712051&amp;offset=2292&amp;offset-sig=8f228f828d0fc0a44e4a79b8fb9709d727c22524" data-longpollurl="/v1/longpoll?id=54f99a69238482629e23731a1e2d5a8cfa60dfa9" data-offset="2292"></div>
    

    
</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//images.ptt.cc/bbs/v2.27/bbs.js"></script>

    <script type="text/javascript">(function(){window['__CF$cv$params']={r:'710ce991ca8bafcd',m:'ohMv4V5Hty16WsyeRzgT8ZumQloEuLrz7OHcqYwBHvk-1653467461-0-AQXIKsgxufmwu+7ekrYo0wW7B2M2lPCeu5ZVe5q1cZ5QRGiwxgCz6gBEVCp4X3w3LUPRxLH7OtKGhiCbYm5fLhV6i41rg+2ewalUCzJ6+dBuXEtOhZbkBJ8GlofXxIe0NNyBdmkHNZaQEAj7xLfk8I6+PPEg5kAvgBBpq6AdEnzN',s:[0xf9395af65c,0x3d0b666c4c],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
