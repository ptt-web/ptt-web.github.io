<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Re: [php問題]重整圖片 - 看板 Web_Design - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="這是因為Temporary Internet Files的關係
加上這個試看看
header (&#34;Expires: Mon, 26 Jul 1997 05:00:00 GMT&#34;); // Date in the past
header (&#34;Last-Modified: &#34; . gmdate(&#34;D, d M Y H:i:s&#34;) . &#34; GMT&#34;);
// always modified
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="Re: [php問題]重整圖片">
<meta property="og:description" content="這是因為Temporary Internet Files的關係
加上這個試看看
header (&#34;Expires: Mon, 26 Jul 1997 05:00:00 GMT&#34;); // Date in the past
header (&#34;Last-Modified: &#34; . gmdate(&#34;D, d M Y H:i:s&#34;) . &#34; GMT&#34;);
// always modified
">
<link rel="canonical" href="https://www.ptt.cc/bbs/Web_Design/M.1113628777.A.5A9.html">

<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-common.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-custom.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-print.css" media="print">




	<script async src='/cdn-cgi/challenge-platform/h/g/scripts/cb/invisible.js?cb=710ce96f6bcaf8eb'></script></head>
    <body>
		
<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" href="/bbs/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" href="/bbs/Web_Design/index.html"><span class="board-label">看板 </span>Web_Design</a>
		<a class="right small" href="/about.html">關於我們</a>
		<a class="right small" href="/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" href="/bbs/Web_Design/index.html">返回看板</a>
		<div class="bar"></div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">seansylin (sylin)</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">Web_Design</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">Re: [php問題]重整圖片</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Sat Apr 16 13:21:48 2005</span></div>
<span class="f2">※ 引述《backfish (犬森RipesLaker飯)》之銘言：
</span><span class="f6">: 我在a.php顯示上傳後的圖片X
</span><span class="f6">: 同時也在裡面放置表單 提供上傳新的圖片
</span><span class="f6">: 然後到b.php做存取
</span><span class="f6">: 存取的規則是 如果有上傳新圖片、則會把舊的圖片X刪掉、並取而代之成為新的圖片X
</span><span class="f6">: 然後再header(&#34;location:a.php&#34;) 回去a.php
</span><span class="f6">: 按理說  圖片X會顯示上傳更新後的新圖片
</span><span class="f6">: 但我發現 必需手動按&#34;重新整理&#34;  才會顯示更新後的圖片
</span><span class="f6">: 否則還是顯示原本被刪除了的舊圖片！
</span><span class="f6">: 本來在其他像是公告系統的文字存取編輯上   也有類似的問題
</span><span class="f6">: 我以為是我在b.php裡
</span><span class="f6">: 使用的是echo &#34;&lt;script&gt;location.href=&#39;a.php&#39;;&lt;/script&gt;&#34;;  所致
</span><span class="f6">: (為了作alert(&#39;文章已刪除&#39;) 的提示功能)
</span><span class="f6">: 刪除後的文章  還是出現在a.php
</span><span class="f6">: 我將公告系統的b.php的程式碼  改為用header()的方式後  這問題就解決了！
</span><span class="f6">: 以為圖片的編輯系統也是這個原因所致...
</span><span class="f6">: 但更改之後  問題沒解決！
</span><span class="f6">: 我想是不是因為圖片會暫存在記憶體？ 或是什麼的？
</span><span class="f6">: 所以
</span><span class="f6">: 請問該如何讓更新後的圖片  做更新後的顯示？   thanx
</span>
這是因為Temporary Internet Files的關係

加上這個試看看

header (&#34;Expires: Mon, 26 Jul 1997 05:00:00 GMT&#34;); // Date in the past
header (&#34;Last-Modified: &#34; . gmdate(&#34;D, d M Y H:i:s&#34;) . &#34; GMT&#34;);
// always modified
header (&#34;Cache-Control: no-cache, must-revalidate&#34;); // HTTP/1.1
header (&#34;Pragma: no-cache&#34;); // HTTP/1.0

--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc) 
</span>◆ From: 218.166.217.51
<div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">backfish</span><span class="f3 push-content">:謝謝謝謝謝謝</span><span class="push-ipdatetime">  60.248.126.71 04/16
</span></div></div>
    
    <div id="article-polling" data-pollurl="/poll/Web_Design/M.1113628777.A.5A9.html?cacheKey=2149-475712020&amp;offset=1435&amp;offset-sig=f81cbb2071cd82655d12d26a45927550a758998e" data-longpollurl="/v1/longpoll?id=d0ac452cdc64ff53198f63223537ee9ff9b5d670" data-offset="1435"></div>
    

    
</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//images.ptt.cc/bbs/v2.27/bbs.js"></script>

    <script type="text/javascript">(function(){window['__CF$cv$params']={r:'710ce96f6bcaf8eb',m:'BchxeG6ZWjr9z9tBxqXqcdF7MwzG69M2fUEBB5K7Y3U-1653467455-0-AYlRd3UCegrEEb/Ripcnxw7mLvHpIBw5idBZPJ5WN/sl5HnPcIILgn+ku26Trk0HwKpKv9AZ3eXDUxSVOkP05iFHFkHynnt3lHn4ZsBEHNdlAc0V3DSZkknuStYoZQxeJgYvnERt+fHd+D487qqRtyO/SbJruW5xXm/BGrNPM8Cv',s:[0x54e9cc7b92,0x06e8d6cfaa],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
