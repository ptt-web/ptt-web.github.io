<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Re: [問題] PHP存取MySQL最浪費時間的地方在？ - 看板 Web_Design - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="以下是我的猜想, 不知道對不對
你這樣做應該是會比較快, 但是會浪費很多硬碟空間,
因為每多一個資料表, 硬碟就要記錄有關這個資料表的額外資訊
一般在設計資料庫時, 資料表的數目是固定的,
把資料表數目設計成動態的, 我實在沒見過,
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="Re: [問題] PHP存取MySQL最浪費時間的地方在？">
<meta property="og:description" content="以下是我的猜想, 不知道對不對
你這樣做應該是會比較快, 但是會浪費很多硬碟空間,
因為每多一個資料表, 硬碟就要記錄有關這個資料表的額外資訊
一般在設計資料庫時, 資料表的數目是固定的,
把資料表數目設計成動態的, 我實在沒見過,
">
<link rel="canonical" href="https://www.ptt.cc/bbs/Web_Design/M.1139403913.A.787.html">

<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-common.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-custom.css">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="//images.ptt.cc/bbs/v2.27/bbs-print.css" media="print">




	<script async src='/cdn-cgi/challenge-platform/h/g/scripts/invisible.js?ts=1653465600'></script></head>
    <body>
		
<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" href="/bbs/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" href="/bbs/Web_Design/index.html"><span class="board-label">看板 </span>Web_Design</a>
		<a class="right small" href="/about.html">關於我們</a>
		<a class="right small" href="/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" href="/bbs/Web_Design/index.html">返回看板</a>
		<div class="bar"></div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">eliang ()</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">Web_Design</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">Re: [問題] PHP存取MySQL最浪費時間的地方在？</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Wed Feb  8 21:18:36 2006</span></div>
<span class="f2">※ 引述《grassboy2 (活力花俏草兒Grassboy大렩》之銘言：
</span><span class="f6">: 我要寫的東西…嗯…
</span><span class="f6">: 有部分應該和E-Mail系統有點像吧…
</span><span class="f6">: 裡面的結構大略是
</span><span class="f6">:  database1
</span><span class="f6">:         users (使用者資料)
</span><span class="f6">:         mails (所有user收到的訊息)
</span><span class="f6">: 但是人一多…
</span><span class="f6">: mails的資料量就會大增…
</span><span class="f6">: 所以我就想要改成
</span><span class="f6">:  users_database
</span><span class="f6">:         users (使用者資料)
</span><span class="f6">:  mails_database
</span><span class="f6">:         (user_id1)
</span><span class="f6">:         (user_id2)
</span><span class="f6">:         (user_id3)
</span><span class="f6">:             ：
</span><span class="f6">:             ：
</span><span class="f6">:         (每個user_id都建立一個資料表)
</span><span class="f6">: 如此…在使用者登入的時候，
</span><span class="f6">: 只需要從users_database→users進行搜尋
</span><span class="f6">: 當帳密正確，允許登入後…
</span><span class="f6">: 再連結到mails_database
</span><span class="f6">: 執行select * from &#39;user_id&#39; (←登入後的id)
</span><span class="f6">: 這種結構…每個user在註冊的時候都會建立一個資料表
</span><span class="f6">: 所以到時候mails_database裡面應該會有上萬個資料表
</span><span class="f6">: 而由於使用者不需要搜尋別人的mails
</span><span class="f6">: 那…這樣會比較有效率嗎？
</span><span class="f6">: 謝謝大家耐心看完這個問題^^
</span>
以下是我的猜想, 不知道對不對

你這樣做應該是會比較快, 但是會浪費很多硬碟空間,
因為每多一個資料表, 硬碟就要記錄有關這個資料表的額外資訊

一般在設計資料庫時, 資料表的數目是固定的,
把資料表數目設計成動態的, 我實在沒見過,
而且這樣設計也不符合一般資料表設計的流程

所以我的建議是, 你的資料表架構可以不用改,
只要你對 mails_datatbase 的 user_id 欄位建索引檔就夠了 (這功能 MySQL 有提供),
索引檔會在硬碟上建立出類似 Tree 的結構, 可以有效加快查詢速度

--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc)
</span>◆ From: 218.35.56.37
<span class="f2">※ 編輯: eliang          來自: 218.35.56.37         (02/08 21:20)
</span><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">grassboy2</span><span class="f3 push-content">:謝謝~我看到phpMyAdmin有這個功能了~</span><span class="push-ipdatetime"> 02/08 23:14
</span></div></div>
    
    <div id="article-polling" data-pollurl="/poll/Web_Design/M.1139403913.A.787.html?cacheKey=2149-475722292&amp;offset=1614&amp;offset-sig=ed0d36ca394bbd24b63ce3c923f421e0470d0004" data-longpollurl="/v1/longpoll?id=5557392d4b459ade1a5a06c26cb98f2c8dc3df94" data-offset="1614"></div>
    

    
</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//images.ptt.cc/bbs/v2.27/bbs.js"></script>

    <script type="text/javascript">(function(){window['__CF$cv$params']={r:'710ce991fd958a27',m:'p6xtMNMisLlZ0oxJtlBBzTFHxd5EWceQb0He3p4b.i0-1653467461-0-AS5bdsgNb1mWnZaMptG9pnIUsuY/bTCl+l8LYyCqPtP6PxBagYiadj8absp2ZtfX6Yj7/tfb1+hN641cw/lHNRy8V1kAmCkmwKZb7krkbU8iiyAstulc8nbtNrml9hMTmAD1Orb8rvNovtdan/qxB9dFEFq7NxkI4GLj7Q5KJuTh',s:[0x60f36bd9d6,0xfbb7d9c6d8],u:'/cdn-cgi/challenge-platform/h/g'}})();</script></body>
</html>
